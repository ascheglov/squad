<!DOCTYPE html>
<html>
<!--
  Yet another calculator for Squad (joinsquad.com)
  https://github.com/ascheglov/squad
  Author: Abyx
  Belongs to public domain
-->

<head>
  <title>Squad distance calculator</title>
  <meta charset="UTF-8">

  <style>
    body {
      margin: 0;
      overflow: hidden;
    }

    #top,
    #dbg {
      position: absolute;
      z-index: 9;
      background-color: #fed;
    }

    #dbg {
      bottom: 0;
      right: 0;
      padding: 3px 3px;
      min-width: 9em;
    }

    #help~#help-text {
      display: none;
      padding: 5px 5px;
    }

    #help:hover~#help-text {
      display: block;
    }

    #fob {
      vertical-align: text-bottom;
    }

    input.grid {
      width: 4.5em;
    }
  </style>
</head>

<body>
  <div id="top">
    <select id="map-name">
      <option value="maps/1x1.jpg" m-width="4096" m-height="4096">[no map]</option>
      <option value="maps/albasrah_minimap.jpg" m-width="3200" m-height="3200">Al Basrah</option>
      <option value="maps/Belaya_Minimap.jpg" m-width="3905" m-height="3905">Belaya</option>
      <option value="maps/Chora1_Minimap.jpg" m-width="4066" m-height="4066">Chora</option>
      <option value="maps/Fools_Road_v1_Minimap.jpg" m-width="1733" m-height="1777">Fool's Road</option>
      <option value="maps/Jensens_Range_Minimap.jpg" m-width="1511" m-height="1510">Jensen's Range</option>
      <option value="maps/gorodok_minimap.jpg" m-width="4333" m-height="4333">Gorodok</option>
      <option value="maps/Kamdesh_Minimap_Final.jpg" m-width="4032" m-height="4032">Kamdesh</option>
      <option value="maps/kohat_minimap.jpg?r=2" m-width="4017" m-height="4017">Kohat Toi</option>
      <option value="maps/kokan_minimap.jpg" m-width="2500" m-height="2500" selected>Kokan</option>
      <option value="maps/logarvalley_minimap.jpg" m-width="1762" m-height="1762">Logar Valley</option>
      <option value="maps/Mestia_Minimap1.jpg" m-width="2400" m-height="2400">Mestia</option>
      <option value="maps/Narva_Minimap.jpg" m-width="2800" m-height="2800">Narva</option>
      <option value="maps/forest_minimap.jpg" m-width="1200" m-height="1200">OP First Light</option>
      <option value="maps/sumari_overlay.jpg" m-width="1300" m-height="1300">Sumari Bala</option>
      <option value="maps/yehorivka_minimap.jpg" m-width="4033" m-height="4033">Yehorivka</option>
    </select>
    <button id="help">?</button>
    <span>
      <input type="checkbox" id="show-fob" />
      <label for="show-fob">
        <img id="fob" src="fob.png">
      </label>
      <input type="checkbox" id="show-target-circles" />
      <label for="show-target-circles" style="color:red">O&nbsp;</label>
    </span>
    <br/>
    <span>
      Mortar:
      <input id="mortar-grid" type="text" class="grid" />
    </span>
    <span>
      Target:
      <input id="target-grid" type="text" class="grid" />
    </span>
    <div id="help-text">
      <hr/><b>Squad distance calculator</b>
      <hr/> Drag mortar (
      <img id="mortar" src="mortar.png" />) and target (
      <img id="target" src="target.png" />).
      <br/> Double-click to set target.
      <br/> Mortar range - 1250m, rockets - 850m.
      <br/> FOB red line - 75m capture range.
    </div>
  </div>
  <div id="dbg"></div>

  <canvas id="canvas" width="680" height="580"></canvas>
  <img id="map" src="fob.png" style="display:none" />

  <script src="calc.js?r=2"></script>
  <script src="impl.js?r=2"></script>
  <script src="main.js?r=2"></script>
  <script src="tests.js"></script>

  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
    (function (d, w, c) {
      (w[c] = w[c] || []).push(function () {
        try {
          w.yaCounter46694946 = new Ya.Metrika({
            id: 46694946,
            clickmap: true,
            trackLinks: true,
            accurateTrackBounce: true,
            ut: "noindex"
          });
        } catch (e) { }
      });

      var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/46694946?ut=noindex" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  <!-- /Yandex.Metrika counter -->
</body>

</html>